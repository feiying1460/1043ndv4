
<link rel="stylesheet" href="../dynaform/reset.css"></link>
<link rel="stylesheet" href="../dynaform/widget.css"></link>
<link rel="stylesheet" href="../dynaform/newpage.css"></link>

<link rel="stylesheet" href="../dynaform/style.css"></link>
<link rel="stylesheet" href="../dynaform/basic_new_ui.css"></link>

<!--  语言部分加载  -->
<script id="lan-js" type="text/javascript" src="../locale/en_US/lan.js"></script>
<link id="lan-css" type="text/css" rel="stylesheet" href="../locale/en_US/lan.css" />

<script type="text/javascript" src="../js/su/su.js"></script>

<script type="text/javascript" src="../js/su/data/proxy.js"></script>
<script type="text/javascript" src="../js/su/data/store.js"></script>
<script type="text/javascript" src="../js/su/data/treestore.js"></script>

<!--
<SCRIPT language="javascript" src="../localiztion/3g.js" type="text/javascript"></SCRIPT>
-->
<script type="text/javascript" src="../js/su/widget/widget.js"></script>
<script type="text/javascript" src="../js/su/widget/window/panel.js"></script>
<script type="text/javascript" src="../js/su/widget/window/wizard.js"></script>

<script type="text/javascript" src="../js/su/widget/grid/grid.js"></script>
<script type="text/javascript" src="../js/su/widget/grid/editor.js"></script>
<script type="text/javascript" src="../js/su/widget/grid/paging.js"></script>

<script type="text/javascript" src="../js/su/widget/form/radio.js"></script>
<script type="text/javascript" src="../js/su/widget/form/checkbox.js"></script>
<script type="text/javascript" src="../js/su/widget/form/textbox.js"></script>
<script type="text/javascript" src="../js/su/widget/form/combobox.js"></script>
<script type="text/javascript" src="../js/su/widget/form/button.js"></script>
<script type="text/javascript" src="../js/su/widget/form/buttongroup.js"></script>
<script type="text/javascript" src="../js/su/widget/form/form.js"></script>
<style type="text/css">
	.content-layout{
		margin-left: 30px;
	}
</style>
<SCRIPT type="text/javascript"><!--
var Selstring = js_no_selected_text = "-Please Select-";
var tag;
var i;
/*
var ISP3g = new Array();

function ItemArrayCreate(value, name)
{
	this.value = value;
	this.name = name;
}
function displayISP()
{
	var locationname = "location" + document.getElementById("combo-location").value;
	var obj = document.getElementById("combo-isp");

	while((i = obj.options.length) > 0)
	{
		obj.remove(0);
	}

	i = 0;
	for (tag in w3gisp_js[locationname])
	{
		if (w3gisp_js[locationname][tag]["isp_name"] == undefined)
		{
			continue;
		}
		obj.options[i] = new Option(w3gisp_js[locationname][tag]["isp_name"], i);
		i++;
	}
	$("select#combo-isp").combobox("rebuild");
}
*/
j=0;
/*
var Region3g = new Array();
for (tag in w3gisp_js)
{
	i = parseInt(tag.substring(8,16));
	Region3g[j]=new ItemArrayCreate(i, w3gisp_js[tag]["location_name"]);
	j++;
}

var local_username;
var local_passwd;
var local_apn;
var local_dialnum;
function displayPara()
{
	var locationname = "location" + document.getElementById("combo-location").value;
	var isp = "isp" + document.getElementById("combo-isp").value;
	//var flag = document.getElementById("checkbox-set").checked;
	var flag = $("input#checkbox-set").checkbox("getChecked");

	if(flag == false)
	{
		$("input#3g-user").textbox("setValue", w3gisp_js[locationname][isp]["username"]);
		$("input#3g-pass").textbox("setValue", w3gisp_js[locationname][isp]["password"]);
		$("input#3g-apn").textbox("setValue", w3gisp_js[locationname][isp]["apn"]);
		$("input#3g-dial").textbox("setValue", w3gisp_js[locationname][isp]["dial_num"]);
		document.getElementById("3g-user").disabled = true;
		document.getElementById("3g-pass").disabled = true;
		document.getElementById("3g-apn").disabled = true;
		document.getElementById("3g-dial").disabled = true;
	}
	else
	{
		document.getElementById("3g-user").disabled = false;
		document.getElementById("3g-pass").disabled = false;
		document.getElementById("3g-apn").disabled = false;
		document.getElementById("3g-dial").disabled = false;
		$("input#3g-user").textbox("setValue", local_username);
		$("input#3g-pass").textbox("setValue", local_passwd);
		$("input#3g-apn").textbox("setValue", local_apn);
		$("input#3g-dial").textbox("setValue", local_dialnum);
	}
}

*/
function ChangeStatus24g()
{
	var  status= $("input#status-24g").buttongroup("getValue");

	if (status == "off")
	{
		document.getElementById("ssid-24g").disabled = true;
		document.getElementById("password-24g").disabled = true; 
	}
	else
	{
		document.getElementById("ssid-24g").disabled = false;
		document.getElementById("password-24g").disabled = false; 
	}
}


-->
</SCRIPT>
</head>

<body>
	<div class="content-container">
		<div id="quick-setup-wizard" class="container widget-container wizard-container">
			<div class="form-container">
				<div id="quicksetup-language-setting" class="content-layout">
					<input id="combo-region" name="combo-region" />
					<input id="combo-time-zone" name="combo-time-zone" />
				</div>

				<!--
				<div id="quicksetup-operation-mode" class="content-layout">
					<input id="operation-mode" name="operation-mode"  />
				</div>

				<div id="quicksetup-3g-settings" class="content-layout">
					<input id="combo-location" name="combo-location" onChange="displayISP();displayPara();"/>
					<SELECT id="combo-isp" name="combo-isp" onChange="displayPara();"></SELECT>
					<input id="combo-authentication" name="combo-authentication" />
					<input id="checkbox-set" name="checkbox-set" />
					<input id="3g-dial" name="3g-dial" />
					<input id="3g-apn" name="3g-apn" />
					<input id="3g-user" name="3g-user" />
					<input id="3g-pass" name="3g-pass" />
            </div>
			
				-->
            <div id="quicksetup-wan-connection-type" class="content-layout">
				<table width="562" border="0" cellspacing="0" cellpadding="0">
					<tr class="cfg_line">
						<td class="td_title">
							<button type="button" class="auto-detect"></button>
						</td>
						<td class="column3">
							<span id="wan_detect_form">
								<input type="text" class="internet-sub-mask error" style="font-size: 14px;" id="txt_wan_detected_type" name="txt_wan_detected_type" />
							</span>
						</td>
					</tr class="cfg_line">
				</table>
				
            	<input id="wan-conn-type" name="wan-conn-type" />
                <p class="quicksetup-wan-connection-type-note" id="quicksetup-wan-connection-type-note"></p>
				<p class="wan-conn-type-validate" class="error" style="display:none;margin-top:20px;" id="wan-conn-type-validate"></p>
            </div>
            
            <div id="quicksetup-mac-clone" class="content-layout">
            	<div id="dynamic">
					<p id="p-wan-conn-dynamic" class="wan-conn-type-head"></p>
					<br>
            		<br>
            		<p id="p-mac-clone-info"></p>
            		<br>
            		<br>
            		<input type="text" id="mac-clone-opt" name="mac-clone-opt"/>
            		<br>
            		<br>
            		<p id="p-mac-clone-note"></p>
            	</div>
            	<div id="pppoe" class="content" style="display:none;">
					<p id="p-wan-conn-pppoe" class="wan-conn-type-head"></p>
					<br>
            		<br>
            		<input type="text" id="pppoe-username" maxlength="118" size="25" name="pppoe-username"/>
            		<input type="password" id="pppoe-password" maxlength="118" size="25" name="pppoe-password"/>
            	</div>
            	<div id="static" style="display:none;">
					<p id="p-wan-conn-static" class="wan-conn-type-head"></p>
					<br>
            		<br>
            		<input type="text" id="static-ip" maxlength="15" size="15" name="static-ip"/>
            		<input type="text" id="static-mask" maxlength="15" size="15" name="static-mask"/>
            		<input type="text" id="static-gateway" maxlength="15" size="15" name="static-gateway"/>
            		<input type="text" id="static-dns1" maxlength="15" size="15" name="static-dns1"/>
            		<input type="text" id="static-dns2" maxlength="15" size="15" name="static-dns2"/>
            	</div>
            	<div id="l2tp" style="display:none;">
					<p id="p-wan-conn-l2tp" class="wan-conn-type-head"></p>
					<br>
            		<br>
					<input type="text" id="l2tp-server" maxlength="63" size="32" name="l2tp-server"/>
            		<input type="text" id="l2tp-username" maxlength="31" size="25" name="l2tp-username"/>
            		<input type="password" id="l2tp-password" maxlength="63" size="25" name="l2tp-password"/>
            		<div id="l2tp-type-cnt">
            			<input type="text" id="l2tp-type" name="l2tp-type"/>
            		</div>
            		<div id="l2tp-static-ip-cnt" style="margin:0px;padding:0px;display:none">
            			<input type="text" id="l2tp-ip" maxlength="15" size="15" name="l2tp-ip"/>
	            		<input type="text" id="l2tp-mask" maxlength="15" size="15" name="l2tp-mask"/>
	            		<input type="text" id="l2tp-gateway" maxlength="15" size="15" name="l2tp-gateway"/>
	            		<input type="text" id="l2tp-dns1" maxlength="15" size="15" name="l2tp-dns1"/>
            		</div>
            	</div>
            	<div id="pptp" style="display:none;">
					<p id="p-wan-conn-pptp" class="wan-conn-type-head"></p>
					<br>
            		<br>
					<input type="text" id="pptp-server" maxlength="63" size="32" name="pptp-server"/>
            		<input type="text" id="pptp-username" maxlength="31" size="25" name="pptp-username"/>
            		<input type="password" id="pptp-password" maxlength="63" size="25" name="pptp-password"/>
            		<div id="pptp-type-cnt">
            			<input type="text" id="pptp-type" name="pptp-type"/>
            		</div>
            		<div id="pptp-static-ip-cnt" style="margin:0px;padding:0px;display:none">
	            		<input type="text" id="pptp-ip" maxlength="15" size="15" name="pptp-ip"/>
	            		<input type="text" id="pptp-mask" maxlength="15" size="15" name="pptp-mask"/>
	            		<input type="text" id="pptp-gateway" maxlength="15" size="15" name="pptp-gateway"/>
	            		<input type="text" id="pptp-dns1" maxlength="15" size="15" name="pptp-dns1"/>
	            	</div>
            	</div>
				<p class="error" style="display:none;margin-top:20px;" id="wan-lan-conflict-validate"></p>
				<p class="error" style="display:none;margin-top:20px;" id="wan-mask-is-empty"></p>
            </div>
            
            <div id="quicksetup-wireless-band">
            	<p class="note" id="p-quicksetup-wireless-band-info"></p>
                <input id="chk-wireless-band" name="chk-wireless-band" />
                <p class="note" id="p-quicksetup-wireless-band-note"></p>
            </div>
            
            <div id="quicksetup-wireless-settings" class="content-layout" style="width: 720px;">
            	<div id="24g" style="margin-bottom:20px;">
            		<input id="status-24g" name="status-24g"/>
	            	<input id="ssid-24g" maxlength="32" size="32" name="ssid-24g" />
	                <input id="password-24g" maxlength="64" size="32" name="password-24g" />
					<input id="pwd-type-24g" name="pwd-type-24g" />
					<p id="p-wep-24g-note" class="error" style="display:none;margin-left:170px;"></p>
                </div>
			<!--	
                <div id="5g">
	            	<input id="status-5g" name="status-5g" />
	            	<input id="ssid-5g" maxlength="32" size="32" name="ssid-5g" />
	                <input id="password-5g" maxlength="64" size="32" name="password-5g" />
					<input id="pwd-type-5g" name="pwd-type-5g" />
					<p id="p-wep-5g-note" class="error" style="display:none;margin-left:170px;"></p>
                </div>
			-->
            </div>
			
			<div id="quicksetup-config-summary">
				<form id="quicksetup-config-form" class="quicksetup_config_form">
				<div class="quicksetup_internet_form">
					<input type="text" class="internet-sub-mask" id="is-wlan-manage" name="is-wlan-manage" />
					<input type="text" class="internet-sub-mask" id="lan-ip" name="lan-ip" />
					<input type="text" class="internet-sub-mask" id="lan-mask" name="lan-mask" />
					<!--
					<input type="text" class="internet-sub-mask" id="show-operation-mode" name="show-operation-mode" />
					-->
					<input type="text" class="internet-sub-mask" id="show-region" name="show-region" />
					<input type="text" class="internet-sub-mask" id="show-time-zone" name="show-time-zone" />
					
					<!--
					<input type="text" class="internet-sub-mask" id="show-3g-isp" name="show-3g-isp" />
					-->
					<input type="text" class="internet-sub-mask" id="show-wan-conn-type" name="show-wan-conn-type" />
				</div>
					
				<div class="quicksetup_wireless_2g_form">
					<input type="text" class="internet-sub-mask" id="show-status-24g" name="show-status-24g" />
					<input type="text" class="internet-sub-mask" id="show-ssid-24g" name="show-ssid-24g" />
					<input type="text" class="internet-sub-mask" id="show-pwd-24g" name="show-pwd-24g" />
				</div>
			 <!--	
				<div class="quicksetup_wireless_5g_form">
					<input type="text" class="internet-sub-mask" id="show-status-5g" name="show-status-5g" />
					<input type="text" class="internet-sub-mask" id="show-ssid-5g" name="show-ssid-5g" />
					<input type="text" class="internet-sub-mask" id="show-pwd-5g" name="show-pwd-5g" />
				</div>
			-->
				<div id="error_code_show" class="error content-layout" style="display:none;" >
                	<input type="text" class="internet-sub-mask error" style="font-weight:bold;" id="error-code" name="error-code" />
					<p style="margin-top:10px;" id="p-error-code-note"></p>
                </div>
				</form>
				<div id="wlan-manage-tips" class="error content-layout" class="content-layout" style="display:none;margin-bottom:20px;" >
                	<p id="p-summary-wlan-note"></p>
                </div>
			</div>
            
            <div id="quicksetup-setup-complete">
            	<h3 id="h3-quicksetup-congratulations"></h3>
                <p class="note" id="p-quicksetup-congratulations-info"></p>
                <button type="button" id="test-conn"></button>
				<form id="test_result_form">
					<input type="text" class="internet-sub-mask" id="txt_conn_stat" name="txt_conn_stat" />
				</form>
				<div id="test-detecting" style="display:none;margin-left:28px;position: relative;" >
                	<p style="margin-bottom:3px;">
						<span id="span-detecting" style="font-size:20px; font-weight:bold;"></span>
					</p>
                	<p id="p-detecting-note"></p>
                </div>
                <div id="test-success" style="display:none;margin-left:28px;position: relative;" >
                	<p style="margin-bottom:3px;">
						<span id="span-success" style="font-size:20px; font-weight:bold;"></span>
						<div class="success_img"></div>
					</p>
                	<p id="p-success-info"></p>
                </div>
				<div id="test-failed" style="display:none;margin-left:28px;position: relative;" >
                	<p style="margin-bottom:3px;">
						<span id="span-failed" style="font-size:20px; font-weight:bold;"></span>
					</p>
                	<p id="p-failed-info"></p>
                </div>
            </div>
        </div>
    </div>

</div><!-- content-container -->

<script type="text/javascript">
//<![CDATA[
$(document).ready(function(e){
var 	is_timezone_firChange =0;

/* Padding HTML */
$("p#wan-conn-type-validate").html($.su.CHAR.QUICK_SETUP.WAN_CONN_VALIDATE);
$("p#wan-lan-conflict-validate").html($.su.CHAR.QUICK_SETUP.WAN_LAN_CONFLICT_VALIDATE);
$("p#wan-mask-is-empty").html($.su.CHAR.QUICK_SETUP.WAN_MASK_IS_EMPTY);
$("p#p-wan-conn-dynamic").html($.su.CHAR.QUICK_SETUP.WAN_CONN_DYNAMIC);
$("p#p-wan-conn-static").html($.su.CHAR.QUICK_SETUP.WAN_CONN_STATIC);
$("p#p-wan-conn-pppoe").html($.su.CHAR.QUICK_SETUP.WAN_CONN_PPPOE);
$("p#p-wan-conn-l2tp").html($.su.CHAR.QUICK_SETUP.WAN_CONN_L2TP);
$("p#p-wan-conn-pptp").html($.su.CHAR.QUICK_SETUP.WAN_CONN_PPTP);

$("p#p-mac-clone-info").html($.su.CHAR.QUICK_SETUP.MAC_CLONE_INFO);
$("p#p-mac-clone-note").html($.su.CHAR.QUICK_SETUP.MAC_CLONE_NOTE);

/*$("span#span-summary-attention").html($.su.CHAR.QUICK_SETUP.SUMMARY_ATTENTION);*/
$("p#p-summary-wlan-note").html($.su.CHAR.QUICK_SETUP.SUMMARY_WLAN_NOTE);

$("span#span-detecting").html($.su.CHAR.QUICK_SETUP.DETECTING);
$("p#p-detecting-note").html($.su.CHAR.QUICK_SETUP.DETECTING_NOTE);
$("span#span-success").html($.su.CHAR.QUICK_SETUP.SUCCESS);
$("p#p-success-info").html($.su.CHAR.QUICK_SETUP.SUCCESS_INFO);
$("span#span-failed").html($.su.CHAR.QUICK_SETUP.SORRY);
$("p#p-failed-info").html($.su.CHAR.QUICK_SETUP.FAILED_INFO);
/* Padding HTML end */
var operation_mode = 3;
$("div#quick-setup-wizard").wizard({
    items: [
        {name: "language", label: $.su.CHAR.QUICK_SETUP.LANGUAGE_REGION_TIME_ZONE, labelPos: -25, content: "#quicksetup-language-setting"},
		//{name: "operation-mode", label: $.su.CHAR.QUICK_SETUP.OPERATION_MODE, labelPos: -40, content: "#quicksetup-operation-mode"},
        //{name: "3g-connection", label: $.su.CHAR.QUICK_SETUP.THE3G_CONNECTION, labelPos: -30, content: "#quicksetup-3g-settings"},
		{name: "wan-connection", label: $.su.CHAR.QUICK_SETUP.WAN_CONNECTION_TYPE, labelPos: -50, content: "#quicksetup-wan-connection-type",
		nextHandler:function(e){
			/*console.log(arguments, this);
			$("div#quick-setup-wizard").wizard("goToIndex", 5);*/
		}},
		/*{name: "mac-clone", label: $.su.CHAR.QUICK_SETUP.MAC_CLONE, labelPos: -18, content: "#1"},
		{name: "mac-clone", label: $.su.CHAR.QUICK_SETUP.MAC_CLONE, labelPos: -18, content: "#1"},*/
        {name: "mac-clone", label: "", labelPos: -18, content: "#quicksetup-mac-clone"},
        // {name: "wireless-band", label: $.su.CHAR.QUICK_SETUP.SELECT_THE_WIRELESS_BAND, labelPos: -50, content: "#quicksetup-wireless-band"},
        {name: "wireless-settings", label: $.su.CHAR.QUICK_SETUP.WIRELESS_SETTINGS, labelPos: -35, content: "#quicksetup-wireless-settings"},
        {name: "config-summary", label: $.su.CHAR.QUICK_SETUP.SUMMARY, labelPos: -15, content: "#quicksetup-config-summary"},
        {name: "setup-complete", label: $.su.CHAR.QUICK_SETUP.SETUP_COMPLETE, labelPos: -30, content: "#quicksetup-setup-complete"}

    ],
	isInvalid: false,
	saveHandler: function(handlerId){
		//$("form#quicksetup-config-form").form('submit', {}, function(data){
		window.parent.loadShieldLayer();
		$("div#quick-setup-wizard").form('submit', {}, function(data){
			window.parent.releaseShieldLayer();
			if(0 == data["error_code"]){
				$("div#error_code_show").hide();
				$("p#p-error-code-note").hide();
				$("div#quick-setup-wizard").wizard("goNext");
			}else if(1 == data["error_code"]){
				/* WLAN Manage */
				/*window.parent.loadShieldLayer();
				window.setTimeout(function (){
					window.parent.releaseShieldLayer();
				}, 3000);*/
				$("div#error_code_show").hide();
				$("p#p-error-code-note").hide();
				
				$("#wlan-manage-tips").show();
				$("div#quick-setup-wizard").find("div.buttons-container div.next-button-container").css("display", "inline-block");
				$("div#quick-setup-wizard").find("div.buttons-container div.save-button-container").css("display", "none");
			}else{
				$("input#error-code").textbox("setValue", $.su.CHAR.ERROR_CODE['e' + data["error_code"]]);
				$("p#p-error-code-note").html("Error Code : " + data["error_code"] + "  -  " + $.su.CHAR.ERROR_CODE['e'+data["error_code"]]);
				$("p#p-error-code-note").show();
				$("div#error_code_show").show();
			}
		});
	},
	finishHandler: function(handlerId){
		//window.location.href="./BasicNetworkMapRpm.htm";
		window.parent.location.reload();
		//window.parent.clickBasic();
	}
}).on("ev_nextValidate", function(e, content){
	e.stopPropagation();
	$(this).find("div"+content+"").find("input:visible").each(function(i, obj){
		var $jqueryObj=$(obj);
		var result = $jqueryObj.textbox("validate");
		
		if(!result){
			$("div#quick-setup-wizard").wizard("validateFailed");
			return;
		}
		
		if("#quicksetup-wan-connection-type" == content){
			if(""==$("input[name=wan-conn-type]").radio("getValue")){
				$("p#wan-conn-type-validate").show();
				$("div#quick-setup-wizard").wizard("validateFailed");
			}else{
				$("p#wan-conn-type-validate").hide();
			}
		}else if("#quicksetup-mac-clone" == content){
			/* ERR_WAN_LAN_CONFLICT */
			$("div#error_code_show").hide();
			$("p#p-error-code-note").hide();
			//$("p#wan-lan-conflict-validate").hide();
			//$("p#wan-mask-is-empty").hide();
			if("static-ip" == $jqueryObj.context.id){
				var ulStaticIp = str2ip_uint32($("input#static-ip").textbox("getValue"));
				var ulStaticMask = str2ip_uint32($("input#static-mask").textbox("getValue"));
				var ulLanIp = str2ip_uint32($("input#lan-ip").textbox("getValue"));
				var ulLanMask = str2ip_uint32($("input#lan-mask").textbox("getValue"));
				
				if(ulStaticMask == 0)
				{
					$("p#wan-lan-conflict-validate").hide();
					$("p#wan-mask-is-empty").show();
					$("div#quick-setup-wizard").wizard("validateFailed");
				}
				else
				if ((ulLanIp & ulLanMask) == (ulStaticIp & ulLanMask) ||
					(ulLanIp & ulStaticMask) == (ulStaticIp & ulStaticMask)){
					
					$("p#wan-mask-is-empty").hide();
					$("p#wan-lan-conflict-validate").show();
					$("div#quick-setup-wizard").wizard("validateFailed");
				}
				else
				{
					$("p#wan-lan-conflict-validate").hide();
					$("p#wan-mask-is-empty").hide();
				}
			}else if("l2tp-ip" == $jqueryObj.context.id){
				var ulL2tpIp = str2ip_uint32($("input#l2tp-ip").textbox("getValue"));
				var ulL2tpMask = str2ip_uint32($("input#l2tp-mask").textbox("getValue"));
				var ulLanIp = str2ip_uint32($("input#lan-ip").textbox("getValue"));
				var ulLanMask = str2ip_uint32($("input#lan-mask").textbox("getValue"));
				
				if(ulL2tpMask == 0)
				{
					$("p#wan-lan-conflict-validate").hide();
					$("p#wan-mask-is-empty").show();
					$("div#quick-setup-wizard").wizard("validateFailed");
				}
				else
				if ((ulLanIp & ulLanMask) == (ulL2tpIp & ulLanMask) ||
					(ulLanIp & ulL2tpMask) == (ulL2tpIp & ulL2tpMask)){
					$("p#wan-mask-is-empty").hide();	
					$("p#wan-lan-conflict-validate").show();
					$("div#quick-setup-wizard").wizard("validateFailed");
				}
				else
				{
					$("p#wan-lan-conflict-validate").hide();
					$("p#wan-mask-is-empty").hide();	
				}
			}else if("pptp-ip" == $jqueryObj.context.id){
				var ulPptpIp = str2ip_uint32($("input#pptp-ip").textbox("getValue"));
				var ulPptpMask = str2ip_uint32($("input#pptp-mask").textbox("getValue"));
				var ulLanIp = str2ip_uint32($("input#lan-ip").textbox("getValue"));
				var ulLanMask = str2ip_uint32($("input#lan-mask").textbox("getValue"));
				
				if(ulPptpMask == 0)
				{
					$("p#wan-lan-conflict-validate").hide();
					$("p#wan-mask-is-empty").show();
					$("div#quick-setup-wizard").wizard("validateFailed");
				}
				else
				if ((ulLanIp & ulLanMask) == (ulPptpIp & ulLanMask) ||
					(ulLanIp & ulPptpMask) == (ulPptpIp & ulPptpMask)){
					$("p#wan-mask-is-empty").hide();	
					$("p#wan-lan-conflict-validate").show();
					$("div#quick-setup-wizard").wizard("validateFailed");
				}
				else
				{
					$("p#wan-lan-conflict-validate").hide();
					$("p#wan-mask-is-empty").hide();	
				}
			}
		}
	});
	
}).on("ev_goTo", function(e, name){
	e.stopPropagation();
	/*
	if("operation-mode" == name){
		if(""==$("input[name=operation-mode]").radio("getValue")){
			setTimeout(function(){
				$($("div#quick-setup-wizard").get(0)).find("button.wizard-btn.btn-next").attr("disabled", true);
			}, 500);
		}
	}
	*/
	/*
	if("3g-connection"==name){
		if("" == $("input[name=operation-mode]").radio("getValue")){
			//$("div#quick-setup-wizard").wizard("goTo","operation-mode");
			return;
		}
		else{
			if(operation_mode==0||operation_mode==1||operation_mode==2){
				
			}else if(operation_mode==3){
				if($("div#quick-setup-wizard").get(0).currentIndex==3){
					$("div#quick-setup-wizard").wizard("goTo", "operation-mode");	
					$("div#quick-setup-wizard").wizard("validateSummaryFailed");
				}else{
					$("div#quick-setup-wizard").wizard("goTo", "wan-connection");
					$("div#quick-setup-wizard").wizard("validateSummaryFailed");
				}
			}
		}
	}else 
	*/
	if("config-summary" == name){
		/*---------- Copy configuration data to POST data ----------*/
		///*
		if(1 == $("input#is-wlan-manage").textbox("getValue")){
			$("#wlan-manage-tips").show();
		}else{
			$("#wlan-manage-tips").hide();
		}
		//*/
		//$("#wlan-manage-tips").hide();
		
		/* 1.Show User's Configuration */
		/* 1.1.Show Region & Time Zone text string */
		//$("input#show-operation-mode").textbox("setValue", $("input#operation-mode").radio("getValue"));
		$("input#show-operation-mode").textbox("setValue", "WAN Only");
		/*
		switch($("input#operation-mode").radio("getValue"))
		{
		case "0":
			$("input#show-operation-mode").textbox("setValue", "3G/4G Preferred");
			break;
		case "1":
			$("input#show-operation-mode").textbox("setValue", "3G/4G Only");
			break;
		case "2":
			$("input#show-operation-mode").textbox("setValue", "WAN Preferred");
			break;
		case "3":
		default:
			$("input#show-operation-mode").textbox("setValue", "WAN Only");
			break;
		}
		*/
		$("input#show-region").textbox("setValue", $("input#combo-region").combobox("getSelectedText"));
		//$("input#show-3g-isp").textbox("setValue", $("select#combo-isp").combobox("getSelectedText"));
		$("input#show-time-zone").textbox("setValue", $("input#combo-time-zone").combobox("getSelectedText"));
		/* 1.2.Wan Connection Type Select */
		/*$("input#show-wan-conn-type").textbox("setValue", $("input#wan-conn-type").radio("getValue"));*/
		switch($("input#wan-conn-type").radio("getValue"))
		{
		case "Dynamic IP":
			$("input#show-wan-conn-type").textbox("setValue", $.su.CHAR.QUICK_SETUP.DYNAMIC_IP);
			break;
		case "Static IP":
			$("input#show-wan-conn-type").textbox("setValue", $.su.CHAR.QUICK_SETUP.STATIC_IP);
			break;
		case "PPPoE":
			$("input#show-wan-conn-type").textbox("setValue", $.su.CHAR.QUICK_SETUP.PPPOE);
			break;
		case "L2TP":
			$("input#show-wan-conn-type").textbox("setValue", $.su.CHAR.QUICK_SETUP.L2TP);
			break;
		case "PPTP":
			$("input#show-wan-conn-type").textbox("setValue", $.su.CHAR.QUICK_SETUP.PPTP);
			break;
		}

		$("input#show-wan-conn-type").closest(".text-container").css("display","block");
		//$("input#show-3g-isp").closest(".text-container").css("display","block");
		/*
		if(operation_mode==1)
		{
			$("input#show-wan-conn-type").closest(".text-container").css("display","none");
		}
		else if(operation_mode==3)
		{
			$("input#show-3g-isp").closest(".text-container").css("display","none");
		}
		*/
		/* 1.3.Wireless 2.4GHz */
		/* status */
		switch($("input#status-24g").buttongroup("getValue"))
		{
		case "on":
			$("input#show-status-24g").textbox("setValue", $.su.CHAR.QUICK_SETUP.ON);
			break;
		case "off":
			$("input#show-status-24g").textbox("setValue", $.su.CHAR.QUICK_SETUP.OFF);
			break;
		default:
			break;
		}
		/* ssid */
		$("input#show-ssid-24g").textbox("setValue", $("input#ssid-24g").textbox("getValue"));
		/* password */
		$("input#show-pwd-24g").textbox("setValue", $("input#password-24g").textbox("getValue"));
		$("input#show-pwd-24g").textbox("setTitle", $("input#password-24g").textbox("getValue"));
	     	
		/* 1.5.Wireless 5GHz */
		/* status */
		/*
		switch($("input#status-5g").buttongroup("getValue")){
		case "on":
			$("input#show-status-5g").textbox("setValue", $.su.CHAR.QUICK_SETUP.ON);
			break;
		case "off":
			$("input#show-status-5g").textbox("setValue", $.su.CHAR.QUICK_SETUP.OFF);
			break;
		default:
			break;
		}
		*/
		/* ssid */
		//$("input#show-ssid-5g").textbox("setValue", $("input#ssid-5g").textbox("getValue"));
		/* password */
	 	//$("input#show-pwd-5g").textbox("setValue", $("input#password-5g").textbox("getValue"));
		//$("input#show-pwd-5g").textbox("setTitle", $("input#password-5g").textbox("getValue"));
		
		/* 1. Region & Time Zone */
		/* (1)Hide Region & Time Zone post widget */
		
		/* 2. WAN Connection Type Radio  operation_mode == 1 3G/4G only*/
		if("" == $("input[name=wan-conn-type]").radio("getValue") &&operation_mode!=1){
			$("div#quick-setup-wizard").wizard("goTo", "wan-connection");
			$("p#wan-conn-type-validate").show();
			$("div#quick-setup-wizard").wizard("validateSummaryFailed");
			return;
		}else{
			$("p#wan-conn-type-validate").hide();
		}
		
		/* 3. Set different data by different wan conn type */
		/* 3.1: disable wan configuration widget */
		$("p#wan-lan-conflict-validate").hide();
		$("p#wan-mask-is-empty").hide();
		$("input#mac-clone-opt").radio("disableAll");
		
		$("input#static-ip").textbox("disable");
		$("input#static-mask").textbox("disable");
		$("input#static-gateway").textbox("disable");
		$("input#static-dns1").textbox("disable");
		$("input#static-dns2").textbox("disable");
		
		$("input#pppoe-username").textbox("disable");
		$("input#pppoe-password").textbox("disable");
		
		$("input#l2tp-username").textbox("disable");
		$("input#l2tp-password").textbox("disable");
		$("input#l2tp-type").radio("disableAll");
		$("input#l2tp-server").textbox("disable");
		$("input#l2tp-ip").textbox("disable");
		$("input#l2tp-mask").textbox("disable");
		$("input#l2tp-gateway").textbox("disable");
		$("input#l2tp-dns1").textbox("disable");
		
		$("input#pptp-username").textbox("disable");
		$("input#pptp-password").textbox("disable");
		$("input#pptp-type").radio("disableAll");
		$("input#pptp-server").textbox("disable");
		$("input#pptp-ip").textbox("disable");
		$("input#pptp-mask").textbox("disable");
		$("input#pptp-gateway").textbox("disable");
		$("input#pptp-dns1").textbox("disable");
		/* disable end */
		
		/* 3.2: enable corresponding widget */
		switch($("input#wan-conn-type").radio("getValue")){
		case "Dynamic IP":
			$("input#mac-clone-opt").radio("enableAll");
			break;
		case "Static IP":
			$("input#static-ip").textbox("enable");
			$("input#static-mask").textbox("enable");
			$("input#static-gateway").textbox("enable");
			$("input#static-dns1").textbox("enable");
			$("input#static-dns2").textbox("enable");
			/* validate */
			if( (false == $("input#static-ip").textbox("validate"))      || 
			    (false == $("input#static-mask").textbox("validate"))    ||
			    (false == $("input#static-gateway").textbox("validate")) ||
			    (false == $("input#static-dns1").textbox("validate"))    ||
			    (false == $("input#static-dns2").textbox("validate")) ){
				$("div#quick-setup-wizard").wizard("goTo", "mac-clone");
				$("div#quick-setup-wizard").wizard("validateSummaryFailed");
				return;
			}
			break;
		case "PPPoE":
			$("input#pppoe-username").textbox("enable");
			$("input#pppoe-password").textbox("enable");
			/* validate */
			if( (false == $("input#pppoe-username").textbox("validate")) || 
			    (false == $("input#pppoe-password").textbox("validate")) ){
				$("div#quick-setup-wizard").wizard("goTo", "mac-clone");
				$("div#quick-setup-wizard").wizard("validateSummaryFailed");
				return;
			}
			break;
		case "L2TP":
			$("input#l2tp-username").textbox("enable");
			$("input#l2tp-password").textbox("enable");
			$("input#l2tp-type").radio("enableAll");
			$("input#l2tp-server").textbox("enable");
			/* validate */
			if( (false == $("input#l2tp-username").textbox("validate")) || 
			    (false == $("input#l2tp-password").textbox("validate")) ||
			    (false == $("input#l2tp-server").textbox("validate")) ){
				$("div#quick-setup-wizard").wizard("goTo", "mac-clone");
				$("div#quick-setup-wizard").wizard("validateSummaryFailed");
				return;
			}
			
			switch($("input#l2tp-type").radio("getValue")){
			case "1":
				$("input#l2tp-ip").textbox("enable");
				$("input#l2tp-mask").textbox("enable");
				$("input#l2tp-gateway").textbox("enable");
				$("input#l2tp-dns1").textbox("enable");
				/* validate */
				if( (false == $("input#l2tp-ip").textbox("validate"))      || 
					(false == $("input#l2tp-mask").textbox("validate"))    ||
					(false == $("input#l2tp-gateway").textbox("validate")) ||
					(false == $("input#l2tp-dns1").textbox("validate")) ){
					$("div#quick-setup-wizard").wizard("goTo", "mac-clone");
					$("div#quick-setup-wizard").wizard("validateSummaryFailed");
					return;
				}
				break;
			case "0":
			default:
				break;
			}
			
			break;
		case "PPTP":
			$("input#pptp-username").textbox("enable");
			$("input#pptp-password").textbox("enable");
			$("input#pptp-type").radio("enableAll");
			$("input#pptp-server").textbox("enable");
			/* validate */
			if( (false == $("input#pptp-username").textbox("validate")) || 
			    (false == $("input#pptp-password").textbox("validate")) ||
			    (false == $("input#pptp-server").textbox("validate")) ){
				$("div#quick-setup-wizard").wizard("goTo", "mac-clone");
				$("div#quick-setup-wizard").wizard("validateSummaryFailed");
				return;
			}
			
			switch($("input#pptp-type").radio("getValue")){
			case "1":
				$("input#pptp-ip").textbox("enable");
				$("input#pptp-mask").textbox("enable");
				$("input#pptp-gateway").textbox("enable");
				$("input#pptp-dns1").textbox("enable");
				/* validate */
				if( (false == $("input#pptp-ip").textbox("validate"))      || 
					(false == $("input#pptp-mask").textbox("validate"))    ||
					(false == $("input#pptp-gateway").textbox("validate")) ||
					(false == $("input#pptp-dns1").textbox("validate")) ){
					$("div#quick-setup-wizard").wizard("goTo", "mac-clone");
					$("div#quick-setup-wizard").wizard("validateSummaryFailed");
					return;
				}
				break;
			case "0":
			default:
				break;
			}
			break;
		default:
			break;
		}
		
		/* 4. Wireless Settings */
		/* 2.4GHz validate */
		if( (false == $("input#status-24g").textbox("validate")) || 
		    (false == $("input#ssid-24g").textbox("validate")) ){
			$("div#quick-setup-wizard").wizard("goTo", "wireless-settings");
			$("div#quick-setup-wizard").wizard("validateSummaryFailed");
			return;
		}
		if( (1 == $("input#pwd-type-24g").textbox("getValue")) || (2 == $("input#pwd-type-24g").textbox("getValue")) ){
			$("input#password-24g").textbox("disable");
		}else{
			/* validate */
			if( (false == $("input#password-24g").textbox("validate")) ){
				$("div#quick-setup-wizard").wizard("goTo", "wireless-settings");
				$("div#quick-setup-wizard").wizard("validateSummaryFailed");
				return;
			}
		}

		/* 5GHz validate */
		/*
		if( (false == $("input#status-5g").textbox("validate")) || 
		    (false == $("input#ssid-5g").textbox("validate")) ){
			$("div#quick-setup-wizard").wizard("goTo", "wireless-settings");
			$("div#quick-setup-wizard").wizard("validateSummaryFailed");
			return;
		}
		if( (1 == $("input#pwd-type-5g").textbox("getValue")) || (1 == $("input#pwd-type-5g").textbox("getValue")) ){
			$("input#password-5g").textbox("disable");
		}else{
			if( (false == $("input#password-5g").textbox("validate")) ){
				$("div#quick-setup-wizard").wizard("goTo", "wireless-settings");
				$("div#quick-setup-wizard").wizard("validateSummaryFailed");
				return;
			}
		}
		*/
		
	}else if("language" == name){
		$("div#quick-setup-wizard").find("div.buttons-container div.back-button-container").css("display", "none");
		
	}else if("wan-connection" == name){
		if(operation_mode!=1){
			if(""==$("input[name=wan-conn-type]").radio("getValue")){
				setTimeout(function(){
					$($("div#quick-setup-wizard").get(0)).find("button.wizard-btn.btn-next").attr("disabled", true);
				}, 500);
			}
		}else{
			$("div#quick-setup-wizard").wizard("goTo", "wireless-settings");
			$("div#quick-setup-wizard").wizard("validateSummaryFailed");
		}
		
	}else if("mac-clone" == name){
		/*
		if(operation_mode==1){
			$("div#quick-setup-wizard").wizard("goTo", "3g-connection");
			$("div#quick-setup-wizard").wizard("validateSummaryFailed");
		}
		*/
		$("input#mac-clone-opt").radio("enableAll");
		
		$("input#static-ip").textbox("enable");
		$("input#static-mask").textbox("enable");
		$("input#static-gateway").textbox("enable");
		$("input#static-dns1").textbox("enable");
		$("input#static-dns2").textbox("enable");
		
		$("input#pppoe-username").textbox("enable");
		$("input#pppoe-password").textbox("enable");
		
		$("input#l2tp-username").textbox("enable");
		$("input#l2tp-password").textbox("enable");
		$("input#l2tp-type").radio("enableAll");
		$("input#l2tp-server").textbox("enable");
		$("input#l2tp-ip").textbox("enable");
		$("input#l2tp-mask").textbox("enable");
		$("input#l2tp-gateway").textbox("enable");
		$("input#l2tp-dns1").textbox("enable");
		
		$("input#pptp-username").textbox("enable");
		$("input#pptp-password").textbox("enable");
		$("input#pptp-type").radio("enableAll");
		$("input#pptp-server").textbox("enable");
		$("input#pptp-ip").textbox("enable");
		$("input#pptp-mask").textbox("enable");
		$("input#pptp-gateway").textbox("enable");
		$("input#pptp-dns1").textbox("enable");
		
	}else if("wireless-settings" == name){
		if(1 == $("input#pwd-type-24g").textbox("getValue")){
			/* WEP */
			$("p#p-wep-24g-note").html($.su.CHAR.QUICK_SETUP.WEP_WARNING);
			$("p#p-wep-24g-note").show();
			$("input#password-24g").get(0).readOnly = true;
			$("input#password-24g").css("background", "#b2b2b2");
		}else if(2 == $("input#pwd-type-24g").textbox("getValue")){
			/* WPA Radius */
			$("p#p-wep-24g-note").html($.su.CHAR.QUICK_SETUP.WPA_RADIUS_WARNING);
			$("p#p-wep-24g-note").show();
			$("input#password-24g").get(0).readOnly = true;
			$("input#password-24g").css("background", "#b2b2b2");
		}else{
			$("p#p-wep-24g-note").hide();
			$("input#password-24g").get(0).readOnly = false;
			$("input#password-24g").css("background", "");
		}
	    /*	
		if(1 == $("input#pwd-type-5g").textbox("getValue")){
			$("p#p-wep-5g-note").html($.su.CHAR.QUICK_SETUP.WEP_WARNING);
			$("p#p-wep-5g-note").show();
			$("input#password-5g").get(0).readOnly = true;
			$("input#password-5g").css("background", "#b2b2b2");
		}else if(2 == $("input#pwd-type-5g").textbox("getValue")){
			$("p#p-wep-5g-note").html($.su.CHAR.QUICK_SETUP.WPA_RADIUS_WARNING);
			$("p#p-wep-5g-note").show();
			$("input#password-5g").get(0).readOnly = true;
			$("input#password-5g").css("background", "#b2b2b2");
		}else{
			$("p#p-wep-5g-note").hide();
			$("input#password-5g").get(0).readOnly = false;
			$("input#password-5g").css("background", "");
		}
		*/
	}else if("setup-complete" == name){
		$("#test-detecting").hide();
		$("#test-success").hide();
		$("#test-failed").hide();
		
	}	
});

/* First: GET User's Configuration from DUT */
var quickSetupGetProxy = new $.su.Proxy({
	//url: "../data/quick_setup_get.json"
	reader:{
		url: "../data/quick_setup_get.json",
		root: "data"
	},
	writer:{
		url: "../data/quick_setup_post_finish.json",
		root: "data"
	}
});
$("div#quick-setup-wizard").form({
	proxy: quickSetupGetProxy,
	fields: [                        
                                 
		{name: "is-wlan-manage", mapping: "is_wlan_manage"},
		{name: "lan-ip", mapping: "lan_ip"},
		{name: "lan-mask", mapping: "lan_mask"},
		
		{name: "combo-region", mapping: "region"},
		{name: "combo-time-zone", mapping: "time_zone"},

		 /*added */
		/*
		{name: "operation-mode", mapping: "operationMode"}, 
		*/    
		/*
		{name: "combo-location", mapping: "combo_location"},             
		{name: "combo-isp", mapping: "combo_isp"},
		{name: "combo-authentication", mapping: "combo_authentication"},
		{name: "checkbox-set", mapping: "checkbox_set"},
		{name: "3g-dial", mapping: "3g_dial"},
		{name: "3g-apn", mapping: "3g_apn"},
		{name: "3g-user", mapping: "3g_user"},
		{name: "3g-pass", mapping: "3g_pass"},
		*/
		
		/*{name: "wan-conn-type", mapping: "wan_conn_type"},*/
		
		{name: "mac-clone-opt", mapping: "wan_mac_clone_opt"},
		
		{name: "static-ip", mapping: "static_ip"},
		{name: "static-mask", mapping: "static_mask"},
		{name: "static-gateway", mapping: "static_gateway"},
		{name: "static-dns1", mapping: "static_dns1"},
		{name: "static-dns2", mapping: "static_dns2"},
		
		{name: "pppoe-username", mapping: "pppoe_usr"},
		{name: "pppoe-password", mapping: "pppoe_pwd"},
		
		{name: "l2tp-username", mapping: "l2tp_usr"},
		{name: "l2tp-password", mapping: "l2tp_pwd"},
		{name: "l2tp-type", mapping: "l2tp_type"},
		{name: "l2tp-server", mapping: "l2tp_server"},
		{name: "l2tp-ip", mapping: "l2tp_ip"},
		{name: "l2tp-mask", mapping: "l2tp_mask"},
		{name: "l2tp-gateway", mapping: "l2tp_gateway"},
		{name: "l2tp-dns1", mapping: "l2tp_dns1"},
		
		{name: "pptp-username", mapping: "pptp_usr"},
		{name: "pptp-password", mapping: "pptp_pwd"},
		{name: "pptp-type", mapping: "pptp_type"},
		{name: "pptp-server", mapping: "pptp_server"},
		{name: "pptp-ip", mapping: "pptp_ip"},
		{name: "pptp-mask", mapping: "pptp_mask"},
		{name: "pptp-gateway", mapping: "pptp_gateway"},
		{name: "pptp-dns1", mapping: "pptp_dns1"},
		
		{name: "status-24g", mapping: "status_24g"},
		{name: "ssid-24g", mapping: "ssid_24g"},
		{name: "password-24g", mapping: "pwd_24g"},
		{name: "pwd-type-24g", mapping: "pwd_type_24g"}
		/*
		{name: "status-5g", mapping: "status_5g"},
		{name: "ssid-5g", mapping: "ssid_5g"},
		{name: "password-5g", mapping: "pwd_5g"},
		{name: "pwd-type-5g", mapping: "pwd_type_5g"}
		*/
	],
	submitBtn: null,
	autoLoad: false
}).on("ev_loadData", function(e, data){
	e.stopPropagation();
	
	/*
	displayISP();
	$("select#combo-isp").combobox("setValue", data["combo_isp"]);
	local_username = data["3g_user"];
	local_passwd = data["3g_pass"];
	local_apn = data["3g_apn"];
	local_dialnum = data["3g_dial"];
	$("input#operation-mode").radio("setValue", data["operationMode"]);
	operation_mode = data["operationMode"];
	if(operation_mode==1)
		$(".step3 .icon span").css("visibility","hidden");
	else if(operation_mode==3)
		$(".step2 .icon span").css("visibility","hidden");
	//$("input#checkbox-set").checkbox("setValue", data["checkbox_set"]);
	if (data["checkbox_set"] == 1)
	{
		//document.getElementById("checkbox-set").checked=true;
		$("input#checkbox-set").checkbox("setChecked", true);
	}
	else
	{
		//document.getElementById("checkbox-set").checked=false;	
		$("input#checkbox-set").checkbox("setChecked", false);	
	}
	
	*/
	is_timezone_firChange = data["is_timezone_modified"];
	if (is_timezone_firChange != 0)
	{
		$("input#combo-time-zone").combobox("setValue", data["time_zone"]);
	}
	else
	{
		$("input#combo-time-zone").combobox("setValue", -1);
		$($("div#quick-setup-wizard").get(0)).find("button.wizard-btn.btn-next").attr("disabled", true);
	}
	
	$("input#wan-conn-type").radio("setValue", data["wan_conn_type"]);
	$("input#status-24g").buttongroup("setValue", data["status_24g"]);	
	
	//displayPara();
	ChangeStatus24g();

	/* WAN Connection Type Radio */
	var val;
	$("input[name=wan-conn-type]").each(function(index, obj){
		if($(this).parent("label[class*=checked]")[0]){
			val = $(this).attr("value");
		}
	});
	hideAllConnectType();
	showRelativeType(val);
	//hideAllConnectType();
	//showRelativeType(data["wan_conn_type"]);

}).form("load");

//$("div#quick-setup-wizard").form("load");
		
/* Second: POST User's Configuration to DUT */
/*var quickSetupPostProxy = new $.su.Proxy({
	url: "../data/quick_setup_post_finish.json"
});
$("form#quicksetup-config-form").form({
	proxy: quickSetupPostProxy,
	fields: [
		{name: "error-code", mapping: "error_code"}
	],
	submitBtn: null,
	autoLoad: false
});*/

//language
/*$("input#combo-language").combobox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.LANGUAGE,
    labelCls: "s",
    items: [
       {value: "en_US", name: $.su.CHAR.LANGUAGE.EN_US, selected: "selected"},
       {value: "zh_CN", name: $.su.CHAR.LANGUAGE.ZH_CN}
    ]
});*/
var location=[
	/*{value: "-1", name: $.su.CHAR.REGION.SELECT, selected: "selected"},*/
	{value: "0",  name: $.su.CHAR.REGION.R000},
	{value: "1",  name: $.su.CHAR.REGION.R001},
	{value: "2",  name: $.su.CHAR.REGION.R002},
	{value: "3",  name: $.su.CHAR.REGION.R003},
	{value: "4",  name: $.su.CHAR.REGION.R004},
	{value: "5",  name: $.su.CHAR.REGION.R005},
	{value: "6",  name: $.su.CHAR.REGION.R006},
	{value: "7",  name: $.su.CHAR.REGION.R007},
	{value: "8",  name: $.su.CHAR.REGION.R008},
	{value: "9",  name: $.su.CHAR.REGION.R009},
	{value: "10", name: $.su.CHAR.REGION.R010},
	{value: "11", name: $.su.CHAR.REGION.R011},
	{value: "12", name: $.su.CHAR.REGION.R012},
	{value: "13", name: $.su.CHAR.REGION.R013},
	{value: "14", name: $.su.CHAR.REGION.R014},
	{value: "15", name: $.su.CHAR.REGION.R015},
	{value: "16", name: $.su.CHAR.REGION.R016},
	{value: "17", name: $.su.CHAR.REGION.R017},
	{value: "18", name: $.su.CHAR.REGION.R018},
	{value: "19", name: $.su.CHAR.REGION.R019},
	{value: "20", name: $.su.CHAR.REGION.R020},
	{value: "21", name: $.su.CHAR.REGION.R021},
	{value: "22", name: $.su.CHAR.REGION.R022},
	{value: "23", name: $.su.CHAR.REGION.R023},
	{value: "24", name: $.su.CHAR.REGION.R024},
	{value: "25", name: $.su.CHAR.REGION.R025},
	{value: "26", name: $.su.CHAR.REGION.R026},
	{value: "27", name: $.su.CHAR.REGION.R027},
	{value: "28", name: $.su.CHAR.REGION.R028},
	{value: "29", name: $.su.CHAR.REGION.R029},
	{value: "30", name: $.su.CHAR.REGION.R030},
	{value: "31", name: $.su.CHAR.REGION.R031},
	{value: "32", name: $.su.CHAR.REGION.R032},
	{value: "33", name: $.su.CHAR.REGION.R033},
	{value: "34", name: $.su.CHAR.REGION.R034},
	{value: "35", name: $.su.CHAR.REGION.R035},
	{value: "36", name: $.su.CHAR.REGION.R036},
	{value: "37", name: $.su.CHAR.REGION.R037},
	{value: "38", name: $.su.CHAR.REGION.R038},
	{value: "39", name: $.su.CHAR.REGION.R039},
	{value: "40", name: $.su.CHAR.REGION.R040},
	{value: "41", name: $.su.CHAR.REGION.R041},
	{value: "42", name: $.su.CHAR.REGION.R042},
	{value: "43", name: $.su.CHAR.REGION.R043},
	{value: "44", name: $.su.CHAR.REGION.R044},
	{value: "45", name: $.su.CHAR.REGION.R045},
	{value: "46", name: $.su.CHAR.REGION.R046},
	{value: "47", name: $.su.CHAR.REGION.R047},
	{value: "48", name: $.su.CHAR.REGION.R048},
	{value: "49", name: $.su.CHAR.REGION.R049},
	{value: "50", name: $.su.CHAR.REGION.R050},
	{value: "51", name: $.su.CHAR.REGION.R051},
	{value: "52", name: $.su.CHAR.REGION.R052},
	{value: "53", name: $.su.CHAR.REGION.R053},
	{value: "54", name: $.su.CHAR.REGION.R054},
	{value: "55", name: $.su.CHAR.REGION.R055},
	{value: "56", name: $.su.CHAR.REGION.R056},
	{value: "57", name: $.su.CHAR.REGION.R057},
	{value: "58", name: $.su.CHAR.REGION.R058},
	{value: "59", name: $.su.CHAR.REGION.R059},
	{value: "60", name: $.su.CHAR.REGION.R060},
	{value: "61", name: $.su.CHAR.REGION.R061},
	{value: "62", name: $.su.CHAR.REGION.R062},
	{value: "63", name: $.su.CHAR.REGION.R063},
	{value: "64", name: $.su.CHAR.REGION.R064},
	{value: "65", name: $.su.CHAR.REGION.R065},
	{value: "66", name: $.su.CHAR.REGION.R066},
	{value: "67", name: $.su.CHAR.REGION.R067},
	{value: "68", name: $.su.CHAR.REGION.R068},
	{value: "69", name: $.su.CHAR.REGION.R069},
	{value: "70", name: $.su.CHAR.REGION.R070},
	{value: "71", name: $.su.CHAR.REGION.R071},
	{value: "72", name: $.su.CHAR.REGION.R072},
	{value: "73", name: $.su.CHAR.REGION.R073},
	{value: "74", name: $.su.CHAR.REGION.R074},
	{value: "75", name: $.su.CHAR.REGION.R075},
	{value: "76", name: $.su.CHAR.REGION.R076},
	{value: "77", name: $.su.CHAR.REGION.R077},
	{value: "78", name: $.su.CHAR.REGION.R078},
	{value: "79", name: $.su.CHAR.REGION.R079},
	{value: "80", name: $.su.CHAR.REGION.R080},
	{value: "81", name: $.su.CHAR.REGION.R081},
	{value: "82", name: $.su.CHAR.REGION.R082},
	{value: "83", name: $.su.CHAR.REGION.R083},
	{value: "84", name: $.su.CHAR.REGION.R084},
	{value: "85", name: $.su.CHAR.REGION.R085},
	{value: "86", name: $.su.CHAR.REGION.R086},
	{value: "87", name: $.su.CHAR.REGION.R087},
	{value: "88", name: $.su.CHAR.REGION.R088},
	{value: "89", name: $.su.CHAR.REGION.R089},
	{value: "90", name: $.su.CHAR.REGION.R090},
	{value: "91", name: $.su.CHAR.REGION.R091},
	{value: "92", name: $.su.CHAR.REGION.R092},
	{value: "93", name: $.su.CHAR.REGION.R093},
	{value: "94", name: $.su.CHAR.REGION.R094},
	{value: "95", name: $.su.CHAR.REGION.R095},
	{value: "96", name: $.su.CHAR.REGION.R096},
	{value: "97", name: $.su.CHAR.REGION.R097},
	{value: "98", name: $.su.CHAR.REGION.R098},
	{value: "99", name: $.su.CHAR.REGION.R099},
	{value: "100", name: $.su.CHAR.REGION.R100},
	{value: "101", name: $.su.CHAR.REGION.R101},
	{value: "102", name: $.su.CHAR.REGION.R102},
	{value: "103", name: $.su.CHAR.REGION.R103},
	{value: "104", name: $.su.CHAR.REGION.R104},
	{value: "105", name: $.su.CHAR.REGION.R105},
	{value: "106", name: $.su.CHAR.REGION.R106},
	{value: "107", name: $.su.CHAR.REGION.R107}
];
$("input#combo-region").combobox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.REGION,
    labelCls: "s",
	inputCls: "xl",
    items:location
});
$("input#combo-time-zone").combobox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.TIME_ZONE,
    labelCls: "s",
    inputCls: "txl",
    items: [
			/*{"value": "-1",   "name": $.su.CHAR.TIMESET.SELECT, "selected": "selected"},*/
			{"value": "0",    "name": $.su.CHAR.TIMESET.GMT0000},
			{"value": "60",   "name": $.su.CHAR.TIMESET.GMT0060},
			{"value": "120",  "name": $.su.CHAR.TIMESET.GMT0120},
			{"value": "180",  "name": $.su.CHAR.TIMESET.GMT0180},
			{"value": "240",  "name": $.su.CHAR.TIMESET.GMT0240},
			{"value": "300",  "name": $.su.CHAR.TIMESET.GMT0300},
			{"value": "360",  "name": $.su.CHAR.TIMESET.GMT0360},
			{"value": "420",  "name": $.su.CHAR.TIMESET.GMT0420},
			{"value": "450",  "name": $.su.CHAR.TIMESET.GMT0450},
			{"value": "480",  "name": $.su.CHAR.TIMESET.GMT0480},
			{"value": "510",  "name": $.su.CHAR.TIMESET.GMT0510},
			{"value": "540",  "name": $.su.CHAR.TIMESET.GMT0540},
			{"value": "600",  "name": $.su.CHAR.TIMESET.GMT0600},
			{"value": "660",  "name": $.su.CHAR.TIMESET.GMT0660},
			{"value": "720",  "name": $.su.CHAR.TIMESET.GMT0720},
			{"value": "780",  "name": $.su.CHAR.TIMESET.GMT0780},
			{"value": "840",  "name": $.su.CHAR.TIMESET.GMT0840},
			{"value": "900",  "name": $.su.CHAR.TIMESET.GMT0900},
			{"value": "930",  "name": $.su.CHAR.TIMESET.GMT0930},
			{"value": "960",  "name": $.su.CHAR.TIMESET.GMT0960},
			{"value": "990",  "name": $.su.CHAR.TIMESET.GMT0990},
			{"value": "1020", "name": $.su.CHAR.TIMESET.GMT1020},
			{"value": "1050", "name": $.su.CHAR.TIMESET.GMT1050},
			{"value": "1065", "name": $.su.CHAR.TIMESET.GMT1065},
			{"value": "1080", "name": $.su.CHAR.TIMESET.GMT1080},
			{"value": "1110", "name": $.su.CHAR.TIMESET.GMT1110},
			{"value": "1140", "name": $.su.CHAR.TIMESET.GMT1140},
			{"value": "1200", "name": $.su.CHAR.TIMESET.GMT1200},
			{"value": "1260", "name": $.su.CHAR.TIMESET.GMT1260},
			{"value": "1290", "name": $.su.CHAR.TIMESET.GMT1290},
			{"value": "1320", "name": $.su.CHAR.TIMESET.GMT1320},
			{"value": "1380", "name": $.su.CHAR.TIMESET.GMT1380},
			{"value": "1440", "name": $.su.CHAR.TIMESET.GMT1440},
			{"value": "1500", "name": $.su.CHAR.TIMESET.GMT1500}
    ]
}).on("ev_change",function(e,oldValue,newValue){
	if ($("input#combo-time-zone").combobox("getSelectedText") != Selstring)
	{
		$($("div#quick-setup-wizard").get(0)).find("button.wizard-btn.btn-next").removeAttr("disabled");
		is_timezone_firChange = 1;
	}
	else
	{
		$($("div#quick-setup-wizard").get(0)).find("button.wizard-btn.btn-next").attr("disabled", true);
		is_timezone_firChange = 0;
	}
});
/*$("button#btn-get-gmt").button({
    fieldLabel: "",
    labelCls: "s",
    btnCls: "l",
    text: $.su.CHAR.QUICK_SETUP.GET_GMT
})*/
/*$("div#div-detect").msg({
	autoshow:true,
	type: "window"
});*/
/*
$("input#operation-mode").radio({
	vtype: 'number',
	items: [
		{boxlabel: (js_deny_note = "<b>3G/4G Only</b>-Only use 3G/4G as the access to the Internet"), inputvalue: "1"},
		{boxlabel: (js_allow_note = "<b>3G/4G Preferred</b>-Only use 3G/4G as the primary access , WAN as a backup"), inputvalue: "0"},
		{boxlabel: (js_allow_note = "<b>WAN Preferred</b>-Only use WAN as the primary access , 3G/4G as a backup"), inputvalue: "2"},
		{boxlabel: (js_allow_note = "<b>WAN Only</b>-Only use WAN as the access to the Internet."), inputvalue: "3"}
	]
}).on("ev_change",function(e,oldValue,newValue){
});




*/
/*
$("input#combo-location").combobox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.REGION,
    labelCls: "l",
	inputCls: "xl",
	items:Region3g
	//items:location
});

$("select#combo-isp").combobox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.ISP,
    labelCls: "l",
	inputCls:"xl", 
	cls:"inline"
});

$("input#combo-authentication").combobox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.AUTH,
    labelCls: "l",
	inputCls: "s",
	tips:$.su.CHAR.QUICK_SETUP.AUTHTIP,
    items:[
		{"value":"0","name":$.su.CHAR.QUICK_SETUP.AUTO},
		{"value":"1","name":$.su.CHAR.QUICK_SETUP.PAP},
		{"value":"2","name":$.su.CHAR.QUICK_SETUP.CHAP}
	]
});


$("input#checkbox-set").checkbox({
    labelCls: "l",
	inputCls: "s",
	items: [
		{boxlabel: $.su.CHAR.QUICK_SETUP.MANUALLY, inputvalue: "1"}
	]
}).on("ev_change", displayPara);
$("input#3g-dial").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.DIAL,
    labelCls: "l",
	inputCls:"xl"
})
$("input#3g-apn").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.APN,
    labelCls: "l",
	inputCls:"xl"
})
$("input#3g-user").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.USER,
    labelCls: "l",
	inputCls:"xl"
})
$("input#3g-pass").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.PASS,
    labelCls: "l",
	inputCls:"xl"
})

*/
var wanType = new Array(
"Dynamic IP",	//	WAN_TYPE_DHCP = 0,
"Static IP",	//	WAN_TYPE_STATIC_IP, 
"PPPoE",	//	WAN_TYPE_PPPOE, 
"802.1x DHCP",	//	WAN_TYPE_802_1X_DHCP,
"802.1x Static IP",	//	WAN_TYPE_802_1X_STATIC_IP,
"BigPond Cable",	//	WAN_TYPE_BPA,
"L2TP",	//	WAN_TYPE_L2TP,
"PPTP",	//	WAN_TYPE_PPTP,
""	//	WAN_TYPE_END
);

$("button.auto-detect").button({
    fieldLabel: null,
    labelCls: "s",
    btnCls: "auto-detect",
	text: $.su.CHAR.QUICK_SETUP.AUTO_BTN
}).click(function(){
	window.parent.loadShieldLayer();
	var proxy = $("span#wan_detect_form").form("getProxy");
	proxy.read({detect: 1}, function(data){
		var detected_wan_type = wanType[data.type],
			wan_type_detect_stat = data.state,
			wait_time = data.wait_time,
			callBack;
		
		switch (wan_type_detect_stat)
		{
		case 1:									/* detecting */
			callBack = arguments.callee;
			$("input#txt_wan_detected_type").textbox("setValue", $.su.CHAR.QUICK_SETUP.DETECTING);
			window.setTimeout(function (){
				proxy.read({}, callBack);
			}, wait_time);
			break;
		case 2:									/* have detected */
		window.parent.releaseShieldLayer();
			
		$("p#wan-conn-type-validate").hide();
			$("input#txt_wan_detected_type").textbox("setValue", detected_wan_type);
			if( ("Dynamic IP" == detected_wan_type)	||
				("Static IP" == detected_wan_type)	||
				("PPPoE" == detected_wan_type)		||
				("L2TP" == detected_wan_type)		||
				("PPTP" == detected_wan_type) ){
				$($("div#quick-setup-wizard").get(0)).find("button.wizard-btn.btn-next").removeAttr("disabled");
				$("input#wan-conn-type").radio("setValue", detected_wan_type);
		}
		
		hideAllConnectType();
		showRelativeType($("input#wan-conn-type").radio("getValue"));
			break;
		case 3:									/* disconnected */
			window.parent.releaseShieldLayer();
			$("p#wan-conn-type-validate").hide();
			$("input#txt_wan_detected_type").textbox("setValue", $.su.CHAR.QUICK_SETUP.WAN_UNPLUGGED);
			hideAllConnectType();
			showRelativeType($("input#wan-conn-type").radio("getValue"));
			break;
		case 0:									/* have not detected */
		default:
			window.parent.releaseShieldLayer();
			$("input#txt_wan_detected_type").textbox("setValue", "");
			break;
		}
	});
});
$("input#txt_wan_detected_type").textbox({
	fieldLabel: null,
	inputCls:"xl",
	readOnly: true
});

var detectProxy = new $.su.Proxy({
	url: "../data/wan_type_detect.json"
});
$("span#wan_detect_form").form({
	proxy: detectProxy,
	submitBtn: null,
	autoLoad: false
});


function hideAllConnectType(){
	$("div#pppoe").hide();
	$("div#dynamic").hide();
	$("div#static").hide();
	$("div#l2tp").hide();
	$("div#pptp").hide();
	$("p#wan-lan-conflict-validate").hide();
	$("p#wan-mask-is-empty").hide();
}
function showRelativeType(type){
	if(type == "PPPoE"){
		$("div#pppoe").show();
	}
	else if(type == "Dynamic IP"){
		$("div#dynamic").show();
	}
	else if(type == "Static IP"){
		$("div#static").show();
	}
	else if(type == "L2TP"){
		$("div#l2tp").show();
	}
	else{
		$("div#pptp").show();
	}
	
	var val = "";
	/* PPTP Type Radio */
	$("input[name=pptp-type]").each(function(index, obj){
		if($(this).parent("label[class*=checked]")[0]){
			val = $(this).attr("value");
		}
	});
	if(val == 0){
		$("#pptp-static-ip-cnt").hide();
	}else{
		$("#pptp-static-ip-cnt").show();
	}
	
	/* L2TP Type Radio */
	$("input[name=l2tp-type]").each(function(index, obj){
		if($(this).parent("label[class*=checked]")[0]){
			val = $(this).attr("value");
		}
	});
	if(val == 0){
		$("#l2tp-static-ip-cnt").hide();
	}else{
		$("#l2tp-static-ip-cnt").show();
	}
}

//wan connection type
$("input#wan-conn-type").radio({
    fieldLabel: null,
    items: [
        // {boxlabel: $.su.CHAR.QUICK_SETUP.AUTO_DETECT, inputvalue: "auto", id: "radio-auto", checked: "checked"},
        {boxlabel: $.su.CHAR.QUICK_SETUP.DYNAMIC_IP, inputvalue: "Dynamic IP", id:"radio-dynamic-ip"/*, checked: "checked"*/},
		{boxlabel: $.su.CHAR.QUICK_SETUP.STATIC_IP, inputvalue: "Static IP", id:"radio-static-ip"},
        {boxlabel: $.su.CHAR.QUICK_SETUP.PPPOE, inputvalue: "PPPoE", id:"radio-pppoe"},
        // {boxlabel: $.su.CHAR.QUICK_SETUP.BIGPOND_CABLE, inputvalue: "bigpond-cable", id:"radio-bigpond-cable"},
        {boxlabel: $.su.CHAR.QUICK_SETUP.L2TP, inputvalue: "L2TP", id:"radio-l2tp"},
        {boxlabel: $.su.CHAR.QUICK_SETUP.PPTP, inputvalue: "PPTP", id:"radio-pptp"}
    ]
});
$("p#quicksetup-wan-connection-type-note").html($.su.CHAR.QUICK_SETUP.WAN_CONNECTION_TYPE_NOTE).css("");


$("input#mac-clone-opt").radio({
    fieldLabel: null,
    items: [
        // {boxlabel: $.su.CHAR.QUICK_SETUP.AUTO_DETECT, inputvalue: "auto", id: "radio-auto", checked: "checked"},
        {boxlabel: $.su.CHAR.QUICK_SETUP.MAC_CLONE_NO,  inputvalue: "0", id:"radio-dynamic-ip", checked: "checked"},
        {boxlabel: $.su.CHAR.QUICK_SETUP.MAC_CLONE_YES, inputvalue: "1", id:"radio-pppoe"}
    ]
});
/* PPPoE */
$("input#pppoe-username").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.USERNAME,
	labelCls: "l",
	validator: function(value){
		var vtypeUsr = new $.su.vtype("wanusr");
		
		var rUsr    = vtypeUsr.validate(value);
		var rBlank  = (""==$(this).textbox("getValue"))?1:0;

		if(rUsr || rBlank)
			return true;
		else
			return false;
	},
	invalidText: $.su.CHAR.VTYPETEXT.PPPOE_USERNAME
});
$("input#pppoe-password").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.PASSWORD,
	labelCls: "l",
	validator: function(value){
		var vtypePwd = new $.su.vtype("wanpwd");
		
		var rPwd    = vtypePwd.validate(value);
		var rBlank  = (""==$(this).textbox("getValue"))?1:0;

		if(rPwd || rBlank)
			return true;
		else
			return false;
	},
	invalidText: $.su.CHAR.VTYPETEXT.PPPOE_PASSWORD
});
/* Static IP */
$("input#static-ip").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.IP_ADDR,
    labelCls:"l",
	vtype: "ip"
});
$("input#static-mask").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.SUBNET,
    labelCls:"l",
	vtype: "netmask"
});
$("input#static-gateway").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.DF_GATEWAY,
    labelCls:"l",
	vtype: "ip"
});
$("input#static-dns1").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.PRI_DNS,
    labelCls:"l",
	vtype: "ip"
});
$("input#static-dns2").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.SEC_DNS,
	labelCls: "l",
	validator: function(value){
		var vtypeUsr = new $.su.vtype("ip");
		
		var rUsr    = vtypeUsr.validate(value);
		var rBlank  = (""==$(this).textbox("getValue"))?1:0;

		if(rUsr || rBlank)
			return true;
		else
			return false;
	},
	invalidText: $.su.CHAR.VTYPETEXT.IP
});
/* L2TP */
$("input#l2tp-ip").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.IP_ADDR,
    labelCls:"l",
	vtype: "ip"
});
$("input#l2tp-mask").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.SUBNET,
    labelCls:"l",
	vtype: "netmask"
});
$("input#l2tp-gateway").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.DF_GATEWAY,
    labelCls:"l",
	vtype: "ip"
});
$("input#l2tp-dns1").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.PRI_DNS,
    labelCls:"l",
	vtype: "ip"
});
$("input#l2tp-username").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.USERNAME,
    labelCls:"l",
	validator: function(value){
		var vtypeUsr = new $.su.vtype("wanusr");

		var rUsr    = vtypeUsr.validate(value);
		var rBlank  = (""==$(this).textbox("getValue"))?1:0;

		if(rUsr || rBlank)
			return true;
		else
			return false;
	},
	invalidText: $.su.CHAR.VTYPETEXT.L2TP_USERNAME
});
$("input#l2tp-password").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.PASSWORD,
    labelCls:"l",
	validator: function(value){
		var vtypeUsr = new $.su.vtype("wanpwd");
		
		var rUsr    = vtypeUsr.validate(value);
		var rBlank  = (""==$(this).textbox("getValue"))?1:0;

		if(rUsr || rBlank)
			return true;
		else
			return false;
	},
	invalidText: $.su.CHAR.VTYPETEXT.L2TP_PASSWORD
});
$("input#l2tp-type").radio({
    fieldLabel: "",
    items: [
         {boxlabel: $.su.CHAR.QUICK_SETUP.DYNAMIC_IP, inputvalue: "0", id: "radio-l2tp-dynamic", checked: "checked"},
         {boxlabel: $.su.CHAR.QUICK_SETUP.STATIC_IP, inputvalue: "1", id:"radio-l2tp-static"}
    ],
    columns:2,
    labelCls:"l"
});
$("input#l2tp-server").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.IP_OR_DOMAIN,
    labelCls:"l",
	validator: function(value){
		var vtypeDomain = new $.su.vtype("domain");
		var vtypeIp     = new $.su.vtype("ip");
		
		var rDomain = vtypeDomain.validate(value);
		var rIp     = vtypeIp.validate(value);

		if(rDomain || rIp)
			return true;
		else
			return false;
	},
	invalidText: $.su.CHAR.VTYPETEXT.IP_OR_DOMAIN
});
/* PPTP */
$("input#pptp-ip").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.IP_ADDR,
    labelCls:"l",
	vtype: "ip"
});
$("input#pptp-mask").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.SUBNET,
    labelCls:"l",
	vtype: "netmask"
});
$("input#pptp-gateway").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.DF_GATEWAY,
    labelCls:"l",
	vtype: "ip"
});
$("input#pptp-dns1").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.PRI_DNS,
    labelCls:"l",
	vtype: "ip"
});
$("input#pptp-username").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.USERNAME,
    labelCls:"l",
	validator: function(value){
		var vtypeUsr = new $.su.vtype("wanusr");
		
		var rUsr    = vtypeUsr.validate(value);
		var rBlank  = (""==$(this).textbox("getValue"))?1:0;

		if(rUsr || rBlank)
			return true;
		else
			return false;
	},
	invalidText: $.su.CHAR.VTYPETEXT.PPTP_USERNAME
});
$("input#pptp-password").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.PASSWORD,
    labelCls:"l",
	validator: function(value){
		var vtypeUsr = new $.su.vtype("wanpwd");
		
		var rUsr    = vtypeUsr.validate(value);
		var rBlank  = (""==$(this).textbox("getValue"))?1:0;

		if(rUsr || rBlank)
			return true;
		else
			return false;
	},
	invalidText: $.su.CHAR.VTYPETEXT.PPTP_PASSWORD
});
$("input#pptp-type").radio({
    fieldLabel: "",
    items: [
         {boxlabel: $.su.CHAR.QUICK_SETUP.DYNAMIC_IP, inputvalue: "0", id: "radio-pptp-dynamic", checked: "checked"},
         {boxlabel: $.su.CHAR.QUICK_SETUP.STATIC_IP, inputvalue: "1", id:"radio-pptp-static"}
    ],
    columns:2,
    labelCls:"l"
});
$("input#pptp-server").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.IP_OR_DOMAIN,
    labelCls:"l",
	validator: function(value){
		var vtypeDomain = new $.su.vtype("domain");
		var vtypeIp     = new $.su.vtype("ip");
		
		var rDomain = vtypeDomain.validate(value);
		var rIp     = vtypeIp.validate(value);

		if(rDomain || rIp)
			return true;
		else
			return false;
	},
	invalidText: $.su.CHAR.VTYPETEXT.IP_OR_DOMAIN
});
/*("button","click",function(){
  $("p").slideToggle();
});*/
/*
$("input#operation-mode").radio("getContainer").delegate("label.radio-label", "click", function(e){
	$($("div#quick-setup-wizard").get(0)).find("button.wizard-btn.btn-next").removeAttr("disabled");
	operation_mode=$("input#operation-mode").radio("getValue");
	$(".step2 .icon span").css("visibility","visible");
	$(".step3 .icon span").css("visibility","visible");
	if(operation_mode==1)
		$(".step3 .icon span").css("visibility","hidden");
	else if(operation_mode==3)
		$(".step2 .icon span").css("visibility","hidden");
});

*/
$("input#wan-conn-type").radio("getContainer").delegate("label.radio-label", "click", function(e){
	var val = "";
	$("input[name=wan-conn-type]").each(function(index, obj){

		if($(this).parent("label[class*=checked]")[0])
		{
			val = $(this).attr("value");
		}
	});
	
	$($("div#quick-setup-wizard").get(0)).find("button.wizard-btn.btn-next").removeAttr("disabled");
	hideAllConnectType();
	showRelativeType(val);
});

$("input#pptp-type").radio("getContainer").delegate("label.radio-label", "click", function(e){
	var val = 0;
	$(this).find("input[type=radio]").each(function(index, obj){
		if($(this).parent("label[class*=checked]")[0]){
			val = $(this).attr("value");
		}
	});
	
	if(val == 0){
		$("#pptp-static-ip-cnt").hide();
	}else{
		$("#pptp-static-ip-cnt").show();
	}
});
$("input#l2tp-type").radio("getContainer").delegate("label.radio-label", "click", function(e){
	var val = 0;
	$(this).find("input[type=radio]").each(function(index, obj){
		if($(this).parent("label[class*=checked]")[0]){
			val = $(this).attr("value");
		}
	});
	
	if(val == 0){
		$("#l2tp-static-ip-cnt").hide();
	}else{
		$("#l2tp-static-ip-cnt").show();
	}
});

//mac clone
/*$("p#p-quicksetup-mac-clone-info").html($.su.CHAR.QUICK_SETUP.MAC_CLONE_INFO);
$("input#rdo-mac-clone").radio({
    fieldLabel: null,
    items: [
        {boxlabel: $.su.CHAR.QUICK_SETUP.MAC_CLONE_NO, inputvalue: "no", id: "radio-mac-clone-no"},
        {boxlabel: $.su.CHAR.QUICK_SETUP.MAC_CLONE_YES, inputvalue: "yes", id:"radio-mac-clone-yes", checked: "checked"}
    ]
});
$("p#p-quicksetup-mac-clone-note").html($.su.CHAR.QUICK_SETUP.MAC_CLONE_NOTE);*/


//select the wireless band
/*$("p#p-quicksetup-wireless-band-info").html($.su.CHAR.QUICK_SETUP.WIRELESS_BAND_INFO);
$("input#chk-wireless-band").checkbox({
    items: [
        {boxlabel: $.su.CHAR.QUICK_SETUP.GHZ24, inputvalue: "2.4g", id: "chk-wireless-band-2.4"},
        {boxlabel: $.su.CHAR.QUICK_SETUP.GHZ5, inputvalue: "5g", id:"chk-wireless-band-5", checked: "checked"}
    ]
});
$("p#p-quicksetup-wireless-band-note").html($.su.CHAR.QUICK_SETUP.WIRELESS_BAND_NOTE);*/

//wireless settings
$("input#status-24g").buttongroup({
    fieldLabel: $.su.CHAR.QUICK_SETUP.WIRELESS_24G,
 	labelCls:'m',
    value:"on"
}).on("ev_change", ChangeStatus24g);

$("input#ssid-24g").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.SSID,
	inputCls:"xl",
	vtype: "wlanssid"
});
$("input#password-24g").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.PASSWORD,
	inputCls:"xl",
	tipsCls: "l",
	validator: function(value){
		var pwdStr = $(this).textbox("getValue");
		var pwdLen = pwdStr.length;
		var vtypePwd = new $.su.vtype("wlanpwd");
		
		var rPwd     = vtypePwd.validate(value);
		var rLength  = (pwdLen >= 8)?1:0;
		
		if("1" == $("input#pwd-type-24g").textbox("getValue")){
			rLength = 1;
		}
		
		if(!rPwd){
			$(this).get(0).invalidText = $.su.CHAR.VTYPETEXT.WLAN_PWD_24G;
		}
		
		if(!rLength){
			$(this).get(0).invalidText = $.su.CHAR.VTYPETEXT.WLAN_PWD_LENGTH;
		}
		
		if(pwdLen == 64){
			var ch = "0123456789ABCDEFabcdef";
			var c;
			for(i = 0; i < pwdLen; i++){
				c = pwdStr.charAt(i);
				if(ch.indexOf(c) == -1){
					$(this).get(0).invalidText = $.su.CHAR.VTYPETEXT.WLAN_PWD_ASCII;
					return false;
				}
			}
		}

		if(rPwd && rLength)
			return true;
		else
			return false;
	}
});
$("input#pwd-type-24g").textbox({
    readOnly: true
}).textbox("hide");

/*
$("input#status-5g").buttongroup({
    fieldLabel: $.su.CHAR.QUICK_SETUP.WIRELESS_5G,
    value:"on"
});
$("input#ssid-5g").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.SSID,
	inputCls:"xl",
	vtype: "wlanssid"
});
$("input#password-5g").textbox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.PASSWORD,
	inputCls:"xl",
	tipsCls: "l",
	validator: function(value){
		var pwdStr = $(this).textbox("getValue");
		var pwdLen = pwdStr.length;
		var vtypePwd = new $.su.vtype("wlanpwd");
		
		var rPwd     = vtypePwd.validate(value);
		var rLength  = (pwdLen >= 8)?1:0;
		
		if("1" == $("input#pwd-type-5g").textbox("getValue")){
			rLength = 1;
		}
		
		if(!rPwd){
			$(this).get(0).invalidText = $.su.CHAR.VTYPETEXT.WLAN_PWD_5G;
		}
		
		if(!rLength){
			$(this).get(0).invalidText = $.su.CHAR.VTYPETEXT.WLAN_PWD_LENGTH;
		}
		
		if(pwdLen == 64){
			var ch = "0123456789ABCDEFabcdef";
			var c;
			for(i = 0; i < pwdStr.length; i++){
				c = pwdStr.charAt(i);
				if(ch.indexOf(c) == -1){
					$(this).get(0).invalidText = $.su.CHAR.VTYPETEXT.WLAN_PWD_ASCII;
					return false;
				}
			}
		}
		if(rPwd && rLength)
			return true;
		else
			return false;
	}
});
$("input#pwd-type-5g").textbox({
    readOnly: true
}).textbox("hide");
*/
/*---------- User's Configuration Summary ----------*/
$("#wlan-manage-tips");
$("input#error-code").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.ERR_CODE,
	labelCls: "m",
	inputCls: "m",
	readOnly: true
}).textbox("hide");
$("input#is-wlan-manage").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.WLAN_MANAGE,
	labelCls: "m",
	inputCls: "m",
	readOnly: true
}).textbox("hide");
$("input#lan-ip").textbox({
	fieldLabel: null,
	labelCls: "m",
	inputCls: "m",
	readOnly: true
}).textbox("hide");
$("input#lan-mask").textbox({
	fieldLabel: null,
	labelCls: "m",
	inputCls: "m",
	readOnly: true
}).textbox("hide");
/* 1. Region */
$("input#show-operation-mode").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.OPERATION_MODE,
	labelCls: "l",
	inputCls: "xxl",
	readOnly: true
});
$("input#show-region").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.REGION,
	labelCls: "l",
	inputCls: "xxl",
	readOnly: true
}).textbox("hide");
$("input#show-time-zone").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.TIME_ZONE,
	labelCls: "l",
	inputCls: "txl",
	readOnly: true
});
/* 2. WAN Connection Type */
/*
$("input#show-3g-isp").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.ISP,
	labelCls: "l",
	inputCls: "txl",
	readOnly: true
});
*/
$("input#show-wan-conn-type").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.WAN_CONNECTION_TYPE,
	labelCls: "l",
	inputCls: "xxl",
	readOnly: true
});
/* 3.1. Dynamic IP - MAC Copy Option */
/* 3.2. Static IP */
/* 3.3. PPPoE */
/* 3.4. L2TP */
/* 3.5. PPTP */
/* 4. Wireless */
/* 4.1.Wireless 2.4GHz */
$("input#show-status-24g").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.WIRELESS_24G,
	labelCls: "l",
	inputCls: "xxl",
	readOnly: true
});
$("input#show-ssid-24g").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.SSID,
	labelCls: "l",
	inputCls: "xxl",
	readOnly: true
});
$("input#show-pwd-24g").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.PASSWORD,
	labelCls: "l",
	inputCls: "xxl",
	readOnly: true
});
/* 4.2.Wireless 5G */
/*
$("input#show-status-5g").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.WIRELESS_5G,
	labelCls: "l",
	inputCls: "xxl",
	readOnly: true
});
$("input#show-ssid-5g").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.SSID,
	labelCls: "l",
	inputCls: "xxl",
	readOnly: true
});
$("input#show-pwd-5g").textbox({
	fieldLabel: $.su.CHAR.QUICK_SETUP.PASSWORD,
	labelCls: "l",
	inputCls: "xxl",
	readOnly: true
});
*/
/*$("input#combo-wireless-security").combobox({
    fieldLabel: $.su.CHAR.QUICK_SETUP.WIRELESS_SECURITY,
    items: [
        {value: "wpa-psk/wpa2-psk", name: $.su.CHAR.QUICK_SETUP.WPA_PSK_WPA2_PSK, selected: "selected"}
    ]
});*/

//setup complete
$("h3#h3-quicksetup-congratulations").html($.su.CHAR.QUICK_SETUP.CONGRATULATIONS);
// $("h3#h3-quicksetup-congratulations").html($.su.CHAR.QUICK_SETUP.COMPLETED);
$("p#p-quicksetup-congratulations-info").html($.su.CHAR.QUICK_SETUP.COMPLETE_INFO);
$("#test-detecting");
$("#test-success");
$("#test-failed");
// $("p#p-quicksetup-congratulations-click-here").html($.su.CHAR.QUICK_SETUP.CLICK_HERE);

/* Loading the Shield Layer */
/*function loadShieldLayer(){
	$("body").append("<div id='shadow'></div>");
	$("#shadow").css({
		visibility:"visible",
		position:"absolute",
		"z-index":"10",
		left:"0",
		top:"0",
		width:"100%",
		height:"100%",
		"background-color":"transparent",
		"background-repeat":"no-repeat",
		"background-position": "center",
		"background-image":"url(../images/quick_setup_images/waiting.gif)",
		filter:"alpha(opacity:50)",
		opacity: "0.5"
	});
};*/
/* Release the Shield Layer */
/*function releaseShieldLayer(){
    $("div").remove("#shadow");
};*/

$("button#test-conn").button({
	 fieldLabel: null,
	 btnCls:"test-conn",
	 text:$.su.CHAR.QUICK_SETUP.TEST_INTERNET_BTN
}).click(function(){
	window.parent.loadShieldLayer();
	$("input#txt_conn_stat").textbox("hide");
	var proxy = $("form#test_result_form").form("getProxy");
	$("#test-detecting").show();
	$("#test-success").hide();
			$("#test-failed").hide();
	var test_internet_conn = function(data){
		window.parent.releaseShieldLayer();
		switch(data["conn_stat"])
		{
		case 1: /* Failed */
			$("#test-detecting").hide();
			$("#test-success").hide();
			$("#test-failed").show();
			break;
		case 2: /* Success */
			$("#test-detecting").hide();
			$("#test-success").show();
			$("#test-failed").hide();
			break;
		case 0: /* Detecting */
			window.parent.loadShieldLayer();
			proxy.read({}, test_internet_conn);	
		default: /* Keep Detecting */
			break;
		}
	}
	proxy.read({}, test_internet_conn);	
});
$("input#txt_conn_stat").textbox({
	fieldLabel: null,
	inputCls:"xl",
	readOnly: true
}).textbox("hide");

var testIntProxy = new $.su.Proxy({
	url: "../data/quick_setup_test_internet.json"
});
$("form#test_result_form").form({
	proxy: testIntProxy,
	fields: [
		{name: "txt_conn_stat", mapping: "conn_stat"}
	],
	submitBtn: null,
	autoLoad: false
});

$("input#combo-region").combobox("hide"); /* hidden region combobox for EU software temporary */

});
//]]>
</script>
</body>
</html>
