(function(a){a.su.Widget("textbox",{defaults:{readOnly:false,isdisabled:false,isvalid:false,fieldLabel:"",tips:"",validator:null,invalidText:(js_invalid_text="The Value in this field is invalid."),vtype:null,vtypeText:null,allowBlank:true,blankText:(js_blank_text="This field is required."),cls:"",validateIcon:false},create:function(e,c){var d=this;d.each(function(m,l){var n=a(this);if(!n.is("input")){console.error("only input tag can be inited as textbox!");return null}a.extend(this,e,c);var j=c.id||this.id||a.su.randomId("textbox"),o=c.value||n.val()||n.attr("value")||e.value,g=c.name||n.attr("name")||this.name||e.name;a(this).attr({value:o,id:j,name:g}).val(o).addClass("text-text "+this.inputCls);var f='<div class="container widget-container text-container '+this.cls+'">';if(this.fieldLabel!==null){f+='<div class="widget-fieldlabel-wrap '+this.labelCls+'">';f+='<label class="widget-fieldlabel text-fieldlabel">'+this.fieldLabel+"</label>";if(this.fieldLabel!==""){f+='<span class="widget-separator">'+this.separator+"</span>"}f+="</div>"}f+='<span class="widget-wrap text-wrap"></span>';if(this.validateIcon){f+='<span class="widget-validate-icon"></span>'}f+='<span class="widget-tips text-tips '+this.tipsCls+'">'+this.tips+"</span>";f+="</div>";var h=a(f);n.replaceWith(h);h.find("span.text-wrap").append(n);if(this.vtype){var k=this.vtype;if(a.type(k)==="string"){this.vtype=new a.su.vtype(k);if(this.vtypeText){this.vtype.vtypeText=this.vtypeText}}}if(this.readOnly){h.addClass("read-only");a(this).attr("readOnly",true)}});var b=d.closest("div.widget-container");b.delegate("input.text-text","focus",function(f){a(this).textbox("setFocus");a(this).textbox("setTips",this.tips);a(this).textbox("setValid")}).delegate("input.text-text","blur",function(f){a(this).textbox("validate")}).delegate("input.text-text","ev_validatechange",function(g,f){if(f){a(this).textbox("setValid")}else{a(this).textbox("setError")}});return d},validate:function(d){var d=d||this,c=d.get(0);var b=false,e=a.trim(c.value);var g=function(i,h,j){a(i).textbox("setTips",j);a(i).trigger("ev_validatechange",h);i.isvalid=h;return h};if(c){if(c.allowBlank!==true){if(e==""){b=false}else{b=true}if(b===false){return g(c,b,c.blankText)}}var f=c.vtype;if(f&&f.isVtype===true){b=f.validate(e);if(b===false){return g(c,b,f.vtypeText)}}if(c.validator){b=c.validator(c.value);if(a.type(b)!=="boolean"){b=false}if(b===false){return g(c,b,c.invalidText)}}return g(c,true,c.tips)}return b},disable:function(c){var c=c||this,b=c.textbox("getContainer");b.addClass("disabled");c.attr("disabled",true);return c},enable:function(c){var c=c||this,b=c.textbox("getContainer");b.removeClass("disabled");c.removeAttr("disabled");return c}})})(jQuery);