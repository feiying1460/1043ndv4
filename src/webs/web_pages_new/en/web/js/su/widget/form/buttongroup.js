(function(a){a.su.Widget("buttongroup",{defaults:{btnsType:"on/off",handler:null,onHandler:null,onCallback:null,onValue:"on",offValue:"off",lowValue:"low",middleValue:"middle",highValue:"high",offHandler:null,offCallback:null,lowHandler:null,middleHandler:null,highHandler:null,items:null,url:null,cls:"",value:""},create:function(f,c){var d=this;d.each(function(k,j){var l=a(j);a.extend(j,f,c);var p="";if(j.btnsType=="on/off"&&j.items==null){p="on-off-container"}var g='<div class="container widget-container button-group-container '+j.cls+" "+p+'">';if(this.fieldLabel!==null){g+='<div class="widget-fieldlabel-wrap '+this.labelCls+'">';g+='<label class="widget-fieldlabel button-group-fieldlabel">'+this.fieldLabel+"</label>";if(this.fieldLabel!==""){g+='<span class="widget-separator">'+this.separator+"</span>"}g+="</div>"}g+='<div class="widget-wrap button-group-wrap">';g+='<ul class="button-group-container"></ul>';g+="</div>";if(this.tips){g+='<span class="widget-tips text-tips '+this.tipsCls+'">'+this.tips+"</span>"}g+="</div>";var h=a(g);l.replaceWith(h);h.append(l.addClass("hidden button-group-value"));if(j.items==null){switch(j.btnsType){case"on/off":j.items=[{text:(js_operation_on="On"),handler:j.onHandler,value:j.onValue},{text:(js_operation_off="Off"),handler:j.offHandler,value:j.offValue}];break;case"low/middle/high":j.items=[{text:(js_operation_low="Low"),handler:j.lowHandler,value:j.lowValue},{text:(js_operation_middle="Middle"),handler:j.middleHandler,value:j.middleValue},{text:(js_operation_high="High"),handler:j.highHandler,value:j.highValue}];break;default:console.error("Invalid Type buttongroup!");return false;break}}var n=j.items,q=h.find("ul.button-group-container");for(var m=0;m<n.length;m++){var r=n[m],o=(m===0)?"fst":(m===(n.length-1)?"lst":"");var g="<li>";g+='<button type="button" value="'+((r.value===undefined||r.value===null)?"":r.value)+'" class="button-group-button '+o+" "+(r.cls||"s")+'" item-index="'+m+'">';g+='<span class="text">'+r.text+"</span>";g+="</button>";g+="</li>";q.append(a(g))}});var b=d.closest("div.button-group-container");b.delegate("button.button-group-button","click",function(l){var h=a(this),j=h.val()||h.attr("value"),g=h.closest("ul.button-group-container"),k=d.get(0),i=k.items[h.attr("item-index")];if(!i){return}if(b.hasClass("disabled")){return}g.find("button").removeClass("selected");g.find("li").removeClass("selected");h.addClass("selected");h.closest("li").addClass("selected");d.buttongroup("setValue",i.value);d.trigger("ev_change",[i.value])});var e=d.get(0).value;if(e!==undefined&&e!==null){d.buttongroup("setValue",e)}return d},setValue:function(e,f){var e=e||this,b=e.closest("div.button-group-container"),g=b.find("input.button-group-value"),f=(f[1]===null||f[1]===undefined)?"":f[1],c=e.get(0).items;var d=b.find("button.button-group-button");d.removeClass("selected").closest("li").removeClass("selected");d.each(function(k,m){var j=a(m),h=m.value||j.attr(f)||j.val(),l=c[k];if(f==h){if(l.handler){l.handler.call(e,f)}if(m.handler){m.handler.call(e,f)}j.addClass("selected").closest("li").addClass("selected");return false}});g.val(f);return e},getValue:function(c){var c=c||this,b=c.closest("div.button-group-container"),e=b.find("input.button-group-value"),d=e[1]||"";return e.val()}})})(jQuery);