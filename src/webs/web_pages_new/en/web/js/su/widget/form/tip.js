(function(a){a.su.Widget("tip",{defaults:{cls:"",icon:"",iconCls:"",_title:"",text:"",position:null,positionRelative:"mouse",showEvent:"mouseover",showDelay:1*1000,dismissDelay:1*1000,html:null,content:null},create:function(e,b){var c=this;c.each(function(j,h){this.tip=this.tip||{};var o=a.extend(this.tip,e,b);if(this.tip.global){if(!this.tip.id){console.error("You are init a global Tip, so you have to set an id for it!");return null}}this.tip.id=this.tip.id||a.su.randomId("tip");var k=a(this);var f='<div class="container widget-container tip-container" id="'+this.tip.id+'">';f+='<div class="tip-wrap">';if(this.tip._title){f+='<h4 class="tip-title">'+this.tip._title+"</h4>"}if(this.tip.showEvent==="click"){f+='<a href="javascript:void(0);" class="tip-close"></a>'}f+='<div class="tip-text">'+this.tip.text+"</div>";f+="</div>";f+="</div>";var g=a(f),n=g.find("div.tip-text");if(this.tip.content){var m=a(this.tip.content),l=m.get(0);if(l.isWidget){n.append(m[l.xtype]("getContainer"))}else{n.append(m)}}else{if(this.tip.html){n.append(a(html))}}o.hostId=k.attr("id");o.isTip=true;this.tip=a.extend(g.get(0),o);a.su.tipManager.add(this.tip);o.t=0});var d=c.get(0).tip;if(d.showEvent==="mouseover"){c.bind("mouseover",function(f){clearTimeout(this.tip.t);if(this.tip.showDelay){this.tip.t=setTimeout(function(){c.tip("show",f)},this.tip.showDelay)}});c.bind("mouseout mouseleave",function(f){clearTimeout(this.tip.t);if(this.tip.dismissDelay){this.tip.t=setTimeout(function(){c.tip("hide")},this.tip.dismissDelay)}})}else{if(d.showEvent==="click"){c.bind("click",function(f){a(this).tip("show",f)});a(d).delegate("a.tip-close","click",function(f){f.preventDefault();f.stopPropagation();c.tip("hide")})}}return c},show:function(f,b){var f=f||this,g=f.get(0).tip,c=a(g).tip("getContainer"),d=g.positionRelative,e=g.position||{pageX:0,pageY:0};switch(d){case"mouse":e=b[1];break;case"body":break;case"me":if(f.is("div")){f.append(a(g).detach())}else{f.parent().css({position:"relative"}).append(a(g).detach())}break;default:if(a(d).length>0){a(d).append(a(g).detach())}break}clearTimeout(g.t);c.css({left:e.pageX,top:e.pageY}).fadeIn(200,function(){a(this).css("display","block")});f.trigger("ev_show")},hide:function(c){var c=c||this,d=c.get(0).tip,b=a(d).tip("getContainer");clearTimeout(d.t);b.fadeOut(200,function(){a(this).css("display","none")});c.trigger("ev_hide")}})})(jQuery);