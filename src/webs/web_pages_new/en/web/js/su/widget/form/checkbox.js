(function(a){a.su.Widget("checkbox",{defaults:{name:null,items:[],fieldLabel:null,cls:"",tips:"",columns:1},create:function(e,c){var d=this;d.each(function(u,o){var m=a(this),r=c.id||this.id||e.id,s=c.value||this.value||e.value,y=c.name||this.name||e.name;m.addClass("hidden");a.extend(this,e,c);m.attr({value:s,id:r,name:y}).val(s).addClass("checkbox");var p='<div class="container widget-container checkbox-group-container '+this.cls+'">';if(this.fieldLabel!==null){p+='<div class="widget-fieldlabel-wrap '+this.labelCls+'">';p+='<label class="widget-fieldlabel checkbox-group-label">'+this.fieldLabel+"</label>";if(this.fieldLabel!==""){p+='<span class="widget-separator">'+this.separator+"</span>"}p+="</div>"}p+='<div class="checkbox-group-wrap">';var q=this.items,v=q.length,t=Math.ceil(v/this.columns),x=0;p+='<ul class="checkbox-group-list-wrap">';for(var j=0;j<q.length;j++){var f=q[j].name||y||"",l=q[j].inputvalue||s||"",g=q[j].id||"checkbox-"+parseInt(Math.random()*1000*1000*1000,10).toString();var k="",w="";if(q[j].checked==="checked"||q[j].checked===true){k='checked="checked"';w="checked"}var h=function(B,z,i,A){p+='<li class="checkbox-list">';p+='<div class="widget-wrap checkbox-wrap">';p+='<label class="checkbox-label '+w+'" for="'+i+'">';p+='<input class="hidden" type="checkbox" name="'+B+'" value="'+z+'" id="'+i+'" '+k+" />";p+='<span class="icon"></span>';p+='<span class="text">'+q[j].boxlabel+"</span>";p+="</label>";p+="</div>";p+="</li>"};if(x<t){h(f,l,g,q[j].boxlabel)}else{p+="</ul>";p+='<ul class="checkbox-group-list-wrap">';h(f,l,g,q[j].boxlabel);x=0}x++}p+="</ul>";p+="</div>";p+="</div>";var n=a(p);m.attr("disabled",true).replaceWith(n);n.prepend(m)});var b=d.closest("div.checkbox-group-container");b.delegate("label.checkbox-label","click",function(h){h.preventDefault();var g=a(this).find("input[type=checkbox]").get(0),f=d.checkbox("getContainer");if(f.hasClass("disabled")){return}a(this).toggleClass("checked");if(g.checked){g.checked=""}else{g.checked=true}d.trigger("ev_change",[])});return d},setChecked:function(e,c){var e=e||this,f=c[1],b=e.checkbox("getContainer"),d=b.find("input:checkbox");if(f){d.closest("label.checkbox-label").addClass("checked");d.get(0).checked=true}else{d.closest("label.checkbox-label").removeClass("checked");d.get(0).checked=false}return e},getChecked:function(d){var d=d||this,b=d.checkbox("getContainer"),c=b.find("input:checkbox");return c.prop("checked")},setValue:function(f,c){var f=f||this,g=c[1],b=f.checkbox("getContainer");if(a.type(g)!="array"){g=[g]}b.find("input[type=checkbox]").each(function(h,j){j.checked=false});b.find("label.checkbox-label").removeClass("checked");for(var e=0;e<g.length;e++){var d=b.find("input[value="+g[e]+"]");if(d.length){d.closest("label.checkbox-label").addClass("checked");d.get(0).checked=true}}},enable:function(c){var b=c.checkbox("getContainer");b.removeClass("disabled");b.find("input:checkbox[name="+c.get(0).name+"]").attr("disabled",false);return c},disable:function(c){var b=c.checkbox("getContainer");b.addClass("disabled");b.find("input:checkbox[name="+c.get(0).name+"]").attr("disabled",true);return c},checkDisabled:function(c){var c=c||this;var b=c.checkbox("getContainer");return(b.attr("class").indexOf("disabled")>-1)}})})(jQuery);